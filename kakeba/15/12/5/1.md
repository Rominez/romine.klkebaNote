网关是系统唯一对外的入口，介于客户端和服务器端之间，用于对请求进行鉴权、限流、路由、监控等  
- 路由：将外部请求转发到具体的微服务实例上，是外部访问微服务的唯一入口  
- 过滤：对请求的处理过程过程进行干预，进行校验、鉴权等处理  
可以在请求的前、中、后对请求进行过滤  

访问方式：搭建好网关服务后，客户端访问格式如 `ip:port/applicationName/...`  
其中 ip 和 port 为 zuul 服务的地址和端口，applicationName 为要访问的微服务名称  
zuul 会从 eureka 中获取注册列表，然后将请求转发到对应的微服务，负载均衡策略由 Ribbon 实现，默认是轮询，可通过声明 `IRule` Bean 进行替换  

直接访问微服务名称存在某些安全问题，zuul 支持通过配置文件定义路由规则，实现使用自定义名称代替真实微服务名称  

网关将请求转发到具体的微服务时，默认会过滤掉请求头中的 `Cookie`，`Set-Cookie`，`Authorization`  

zuul 依赖 hystrix 实现熔断和服务降级  

zuul 配置指定轮询策略时，切换访问不同的微服务集群时会弄混，原因？？  

对请求限流的方式可以避免系统雪崩  
- 令牌桶限流 [see](1/1.md)  
- 漏桶限流 [see](1/2.md)  
- 多维请求限流 [see](1/3.md)  

使用 zuul 实现灰度发布 [see](1/4.md)  

zuul 高可用问题  
通过 zuul 将请求转发到不同的微服务节点上，这里 zuul 仍然是单点的  
配置 zuul 集群则需要通过 Nginx 之类的额外负载均衡器实现  

[back](../5.md)  