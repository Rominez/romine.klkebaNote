程序执行时并非所有地方都能停顿下来开始GC  
能够停顿下来进行GC的位置称为**安全点**  

抢先式中断：GC时直接中断所有线程。如果有线程不在安全点，则恢复线程直到跑到安全点  
主动式中断：设置一个中断标志，线程运行到安全点时主动检查这个标志查看是否需要中断  

如果线程处于阻塞状态，则无法响应JVM的中断请求，走到安全点中断挂起，所以需要安全区域  
安全区域指一段代码中，对象的引用关系不会发生变化，这个区域的任何位置开始GC都是安全的  
当线程运行到安全区域时，如果发生了GC，JVM会忽略这个状态下的线程  
当线程要离开安全区域，会检查JVM是否已经完成GC。线程必须等到可以安全离开的信号才能离开  

[back](../10.md)  