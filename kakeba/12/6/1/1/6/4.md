mysql 中修改、删除操作都需要加锁，where条件和事务隔离级别不同的情况下加锁策略也不同  

主键条件+RC： 在主索引上加记录写锁  
唯一索引+RC： 唯一索引是辅助索引，在这个辅助索引上加写锁，并且在对应的主索引上加写锁  
非唯一索引+RC： 会在辅助索引和对应的主索引上加写锁  
无索引+RC： 在表的每一行记录上加行写锁（并不是加全表锁）  
主键+RR： 主索引加记录写锁，和主键+RC一致  
唯一索引+RR： 和唯一索引+RC 一致  
非唯一索引+RR： RR 级别为了防止幻读，辅助索引上除了加行写锁以外还会给该行相邻的间隙加锁  
无索引+RR： 全表加行写锁，每条数据之间都加上间隙锁  
serializable 隔离级别： 修改删除和 RR 级别完全一致，但 serializable 并不是快照读，所以普通的 select 语句会加读锁  

[back](../6.md)  