# Java 并发编程  

#### join 方法  
`thread.join()` 在一个线程中调用另一个线程的 `join` 方法，这个线程会进入等待状态，等待那个线程执行完后再执行。调用自己的 `join` 方法会进入死锁  

#### 线程的三大特性  
- 原子性  
要么全部执行不会被打断，要么不执行  
- 可见性  
当多个线程访问同一个对象时，一个线程改变了对象的值，其他线程能够立即看得到修改的值  
- 有序性  
按照代码的先后顺序执行  

#### jvm 内存结构  
堆，栈，方法区  

#### java 内存模型 JMM 
jmm 决定一个线程对共享变量的写入时，能对另一个线程可见  
线程之间的共享变量存储在主内存中，每个线程都有一个私有的本地内存，本地内存存储了该线程以读/写共享变量的副本，操作完后再将本地内存副本的值更新到共享内存中    

#### volatile  
保证对象在多个线程中可见。线程操作 volatile 修饰的对象时，会立即更新主内存，需要读取时也会去主内存中读取最新值。  
这里并不知直接操作主内存中的值，所以 volatile 并不具有原子性。  

#### 原子类 
类似 `AtomicInteger` 的类，多线程中可以保证原子性  

#### ThreadLocal<T>  
线程本地变量，多线程使用时互不影响  
原理：线程作为key的Map集合  
```
void set(Object value) 设置变量值  
public Object get() 返回变量值  
public void remove() 删除，减少内存占用，加快内存回收速度  
protected Object initialValue() 返回初始值  
```
