高并发经验  
- 接口的性能和各种优化方面：提到压测，提到熔断限流，但对方似乎都不怎么关心  
- 对方提到幂等性问题，特此做出总结  
- 电商项目中常见的高并发问题，无非几种 
- 幂等性问题：处理幂等性问题，首先要从前端开始处理，一是限制用户的使用环境，比如同一时间只能在一台手机上登录；一是限制用户请求频率，比如一个按钮按下去之后，应该跳转到另一个页面，或者延时多少秒才能让再次点击有效
只做前端限制当然是不够的，一份有价值的东西往往会引来高技术人员，比如黄牛抢票从来不会老老实实的用12306，他们可以自己写脚本来抢。那么应对这系列问题，无非有以下几个场面
    - 我有 n 个红包，大家都来抢，一人一个，解决方案：请求这个接口时，将该用户的 id 保存到一个 set 中，比如 redis 的有序集合。集合本身就是去重的，随便请求多少次，我最后取前 n 个用户 id 就行。最终给用户展示的结果，永远不要因为请求成功旧给出抢占成功或者失败这种，而是查询前 n 个用户 id 给出结果  
    - 我有一块大饼，大家都来掰，每个人随机掰多少份，解决方案：设置这块大饼时，先随机分成不等的 n 份，然后照着场景一来，用户最终看到的份量，其实只是一个简单的查询而已  
    - 订单和库存问题：将订单数放到 redis 里，每次下订单前先查询一遍剩余订单数是否足够，足够的情况下使用 decrby 命令将库存去掉订单中的份数，再检查一遍去掉之后库存是否符合正常逻辑，最后将其他操作异步交给其他线程，返回订单结果给客户  
        - 订单的超时取消  
            - mq 的延时消息
            - 定时任务：将未支付的订单存到库里，订单的超时时间建立索引，设置一个定时任务每隔一段时间检索出所有超时的订单，然后统一取消  
        - 订单的重复提交问题  
            - 前端限制按钮置灰
            - 使用 redis 分布式锁，后端在下单前获取一个用户token，下单时检查 token 是否有效  
- 其他问题：待补充  
